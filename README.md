# Блокировки
В РФ ввели интернет-цензуру, в связи с этим провайдеров обязали устанавливать "чёрные ящики"
"Ящики" называются ТСПУ, что значит "Технические Средства Противодействия Угрозам".

## ТСПУ
ТСПУ является комплексом средств для блокировки. Одним из них является DPI, который можно обойти с помощью ByeDPI.

# Обход блокировок по DPI (атака DPI, десинхронизация и прочие синонимы)
Целью атаки является сделать начало соединения (TLS Handshake - TLS Рукопожатие) незаметным для ТСПУ и установить безопасное соединение (HTTPS) с сайтом

<details><summary>О TLS Handshake</summary>
  Как устанавливается безопасное соединение (на примере TLS 1.2)
  
  1. Начало договора:
  Наш клиент (допустим, браузер) посылает сообщение ClientHello (в переводе: Привет от Клиента), в котором указанны: версия TLS-протокола, которую поддерживает клиент, случайные данные и список поддерживаемых методов шифрования (cipher suites), подходящих для работы с TLS.
  
  2. Обработка запроса сервером
  Сервер даёт ServerHello (Привет от сервера), содержащим: выбранную сервером версию TLS, случайное число, сгенерированное сервером, выбранный метод шифрования из тех, что дал клиент
  2.1. Сервер отправляет свой цифровой сертификат сервера (в зависимости от версии TLS этот этап может быть пропущен)
  
 3. Если клиенту мало данных для шифрования
  Если переданных сервером данных мало, то сервер передаёт сообщение ServerKeyExchange, в котором передаются необходимые данные, которые затребовал клиент.
 3.1. Сервер отсылает ServerHelloDone, означающее конец первого раунда установления соединения
 3.2 Клиент даёт ClientKeyExchange, которое содержит клиентскую часть протокола Диффи-Хеллмана или зашифрованный открытым ключом из сертификата сервера секрет (PreMasterSecret);
Клиент и сервер, используя ключ PreMasterSecret и случайно сгенерированные числа, вычисляют общий секрет. Вся остальная информация о сеансовом ключе будет получена из общего секрета;
Клиент посылает сообщение ChangeCipherSpec, которое указывает на то, что вся последующая информация будет зашифрована установленным в процессе подтверждения связи алгоритмом, используя общий секретный ключ. Это сообщение уровня записей и поэтому имеет тип 20, а не 22;
Клиент посылает сообщение Finished, которое содержит хеш и MAC, сгенерированные на основе предыдущих сообщений процедуры подтверждения связи;
Сервер пытается расшифровать Finished-сообщение клиента и проверить хеш и МАС. Если процесс расшифровки или проверки не удаётся, подтверждение связи считается неудавшимся, и соединение должно быть оборвано;
Сервер посылает ChangeCipherSpec и зашифрованное сообщение Finished, и в свою очередь клиент тоже выполняет расшифровку и проверку.
</details>

## Виды атак, их описания и немного теории
Атаки могут быть разных видов.
* В ByeDPI их несколько:
  * Split - нарезка
  * Disoder - обратная отправка
  * OOB - (Out-Of-Band - Вне очереди) имеет пометку, как срочный
  * OOB Disoder - обратная отправка с пометкой "срочный"
  * FAKE - является disoder'ом с подмешиванием сгенерированных пакетов в поток)
  * UDP Fake - сгенерировать UDP пакет

  ## Что такое UDP и TCP?
  Это протоколы (правила общения между Вами и сайтом)
  * TCP
    * Имеет гарантии доставки и целостности данных, переотправляя потерянные пакеты при обнаружении пропажи
    * Защищает данные за счёт SSL (протокол, предназначенный для защиты соединений) шифрования с помощью TLS
    * Имеет более низкии скорости, чем UDP из-за установки безопасного соединения

  * UDP
    * Высокая скорость
    * Отсутствие шифрования (хотя для UDP можно изпользовать DTLS - аналог TLS для UDP)

 # Как атаковать DPI?
